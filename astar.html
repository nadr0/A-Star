<head>
    <script type="text/javascript" src="class.js"></script>
    <script type="text/javascript" src="node.js"></script>

    </head>
    <body>
      <canvas id="myCanvas" width="1280" height="640" style="border:1px solid #000000; padding-left: 0; padding-right: 0; margin-left: auto; margin-right: auto; display: block; background-color:white; "></canvas>

      <script>
            window.requestAnimFrame = (function(callback) {
            return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
            function(callback) {
              window.setTimeout(callback, 1000 / 60);
            };
          })();

        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');

        var nodesize = 16;
        // Creates the 40 slots for y
        var data = [];
        for (var i = 0; i < canvas.height/nodesize; i++) {
            for (var j = 0; j < canvas.width/nodesize; j++) {
              data.push( new node(j * nodesize, i * nodesize));
            };
        };

        function drawnodes() {
          for (var i = 0; i < data.length; i++) {
            data[i].draw();
          };
        };

        function drawgrid() {
          // Draws the grid to see each tile
          for (var i = 0; i < (canvas.width/this.nodesize); i++) {
            context.beginPath();
            context.strokeStyle = 'black';
            context.moveTo(this.nodesize*i, 0);
            context.lineTo(this.nodesize*i, canvas.width);
            context.stroke();
            context.closePath();
          };
          for (var i = 0; i < (canvas.height/this.nodesize); i++) {
            context.beginPath();
            context.strokeStyle = 'black';
            context.moveTo(0, this.nodesize*i);
            context.lineTo(canvas.width, this.nodesize*i);
            context.stroke();
            context.closePath();
          };
        };
        


        function animate(canvas, context,startTime) {
          var time = (new Date()).getTime() - startTime;
          var currentTime = Date.now();

          context.clearRect(0, 0, canvas.width, canvas.height);
          drawnodes();
          drawgrid();

          requestAnimFrame(function() {
            animate(canvas, context, startTime);
          });
        };

        setTimeout(function() {
            var startTime = (new Date()).getTime();
            animate(canvas, context,startTime);
          }, 1000);
      </script>
</body>